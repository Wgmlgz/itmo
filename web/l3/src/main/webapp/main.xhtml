<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
>
  <h:head>
    <title>–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
    <script
      type="text/javascript"
      src="/jakarta.faces.resource/faces.js.xhtml?ln=jakarta.faces"
    ></script>
    <link rel="stylesheet" type="text/css" href="resources/css/styleMain.css" />
  </h:head>

  <h:body>
    <h:form id="form">
      <div class="content">
        <h1>üíÄ üíÄ üíÄ üíÄ üíÄ üíÄ üíÄ</h1>
        <a href="/l3">–°—Å—ã–ª–∫–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</a>
        <div class="selection-box">
          <div class="coordinates">
            <canvas id="plot" width="300" height="300"></canvas>
            <div>
              <h:outputLabel value="–í—ã–±–µ—Ä–∏—Ç–µ X:" />
              <h:inputText
                id="hiddenX"
                value="#{bean.x}"
                style="display: none"
                validatorMessage="X –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–∂–¥—É -4 –∏ 4"
              >
                <f:validateDoubleRange minimum="-4.0" maximum="4" />
              </h:inputText>
              <h:panelGrid columns="9">
                <h:commandButton
                  value="-4"
                  action="#{bean.setX(-4.0)}"
                  update="hiddenX"
                  styleClass="commandButtonSquare"
                >
                  <f:ajax execute="@this" render="hiddenX" />
                </h:commandButton>
                <h:commandButton
                  value="-3"
                  action="#{bean.setX(-3.0)}"
                  update="hiddenX"
                  styleClass="commandButtonSquare"
                >
                  <f:ajax execute="@this" render="hiddenX" />
                </h:commandButton>
                <h:commandButton
                  value="-2"
                  action="#{bean.setX(-2.0)}"
                  update="hiddenX"
                  styleClass="commandButtonSquare"
                >
                  <f:ajax execute="@this" render="hiddenX" />
                </h:commandButton>
                <h:commandButton
                  value="-1.0"
                  action="#{bean.setX(-1.0)}"
                  update="hiddenX"
                  styleClass="commandButtonSquare"
                >
                  <f:ajax execute="@this" render="hiddenX" />
                </h:commandButton>
                <h:commandButton
                  value="0"
                  action="#{bean.setX(0.0)}"
                  update="hiddenX"
                  styleClass="commandButtonSquare"
                >
                  <f:ajax execute="@this" render="hiddenX" />
                </h:commandButton>
                <h:commandButton
                  value="1"
                  action="#{bean.setX(1.0)}"
                  update="hiddenX"
                  styleClass="commandButtonSquare"
                >
                  <f:ajax execute="@this" render="hiddenX" />
                </h:commandButton>
                <h:commandButton
                  value="2"
                  action="#{bean.setX(2.0)}"
                  update="hiddenX"
                  styleClass="commandButtonSquare"
                >
                  <f:ajax execute="@this" render="hiddenX" />
                </h:commandButton>
                <h:commandButton
                  value="3"
                  action="#{bean.setX(3.0)}"
                  update="hiddenX"
                  styleClass="commandButtonSquare"
                >
                  <f:ajax execute="@this" render="hiddenX" />
                </h:commandButton>
                <h:commandButton
                  value="4"
                  action="#{bean.setX(4.0)}"
                  update="hiddenX"
                  styleClass="commandButtonSquare"
                >
                  <f:ajax execute="@this" render="hiddenX" />
                </h:commandButton>
              </h:panelGrid>
            </div>

            <div class="elements">
              <h:outputLabel value="–í–≤–µ–¥–∏—Ç–µ Y (-5...5):" for="yInput" />
              <br />
              <p:inputText
                id="yInput"
                value="#{bean.y}"
                validatorMessage="Y –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–∂–¥—É -5 –∏ 5"
              >
                <f:validateDoubleRange minimum="-5" maximum="5" />
                <p:ajax
                  update="yMessage"
                  event="input"
                  process="@this"
                  immediate="true"
                />
              </p:inputText>
              <p:message id="yMessage" for="yInput" display="icon, text" />
            </div>

            <div class="elements">
              <h:outputLabel for="slider">–í–≤–µ–¥–∏—Ç–µ R (1..3):</h:outputLabel>
              <!-- <h:inputHidden
              id="slider"
              value="#{bean.r}"
              validatorMessage="R –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–∂–¥—É 1 –∏ 3"
            />
            <p:inputText id="sliderDisplay" value="2.0" readonly="true" /> -->
              <p:spinner
                id="slider"
                min="1"
                max="3"
                default="2.0"
                value="#{bean.r}"
                step="0.5"
                class="slider-container"
                onchange="updateR();"
              >
                <f:validateDoubleRange minimum="1" maximum="3" />
              </p:spinner>
              <p:message id="rMessage" for="slider" display="icon, text" />
            </div>

            <div class="elements">
              <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ—á–∫–∏ -->
              <p:commandButton
                id="submit"
                widgetVar="submitButton"
                value="–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ—á–∫—É"
                action="#{bean.checkPoint}"
                update="results xValue yValue insideValue"
                oncomplete="drawPointOnDesmos();"
              />
              <p:remoteCommand
                name="executeCheckPoint"
                action="#{bean.checkPoint}"
                update="results hiddenX yInput insideValue"
                oncomplete="drawPointOnDesmos();"
                widgetVar="widget"
              />
              <h:inputHidden id="xValue" value="#{bean.lastCheckedPoint.x}" />
              <h:inputHidden id="yValue" value="#{bean.lastCheckedPoint.y}" />
              <h:inputHidden
                id="insideValue"
                value="#{bean.lastCheckedPoint.inside}"
              />
            </div>
          </div>
          <div class="results-area">
            <div class="results-table-container">
              <p:dataTable
                value="#{bean.results}"
                var="result"
                id="results"
                class="results-table"
              >
                <p:columnGroup type="header">
                  <p:row>
                    <p:column
                      headerText="–†–µ–∑—É–ª—å—Ç–∞—Ç—ã"
                      colspan="4"
                      class="results-table"
                    />
                  </p:row>
                  <p:row>
                    <p:column headerText="x" class="results-table" />
                    <p:column headerText="y" class="results-table" />
                    <p:column headerText="r" class="results-table" />
                    <p:column headerText="hit" class="results-table" />
                  </p:row>
                </p:columnGroup>

                <p:column>
                  <h:outputText value="#{result.x}" />
                </p:column>
                <p:column>
                  <h:outputText value="#{result.y}" />
                </p:column>
                <p:column>
                  <h:outputText value="#{result.r}" />
                </p:column>
                <p:column>
                  <h:outputText value="#{result.inside ? '‚úÖ' : '‚ùå'}" />
                </p:column>
              </p:dataTable>
            </div>
          </div>
        </div>
      </div>
    </h:form>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Desmos API –∏ –Ω–∞—à JS —Ñ–∞–π–ª -->
    <script
      src="https://www.desmos.com/api/v1.4/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"
    ></script>

    <h:outputScript library="js" name="graph.js" />
    <h:outputScript library="js" name="canvas.js" />
  </h:body>
</html>
